(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4830],{40378:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/[user_id]/history",function(){return c(41827)}])},41827:function(i,b,a){"use strict";a.r(b);var d=a(35230),e=a.n(d),j=a(24246),k=a(17459),f=a(14206),l=a.n(f),m=a(27378),n=a(36665),o=a(5566),p=a(74690),q=a(59498),r=a(78277);function s(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function t(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function u(a,c){if(a){if("string"==typeof a)return s(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return s(a,c)}}var g,h,v=[{topic:"rating",caption:"AC RATING"},{topic:"ratingRank",caption:"AC RATING \uB7AD\uD0B9"},{topic:"exp",caption:"\uACBD\uD5D8\uCE58"},{topic:"solvedCount",caption:"\uD47C \uBB38\uC81C \uC218"},{topic:"voteCount",caption:"\uAE30\uC5EC \uC218"},],c=function(c){var d,t,w,b,e,f=c.user,a=c.histories,h=null!==(d=null==a?void 0:a[0])&& void 0!==d?d:[],x=(b=(0,r.Z)([1200,0]),e=1,function(a){if(Array.isArray(a))return a}(b)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(b,e)||u(b,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],i=(0,m.useMemo)(function(){return new Date(v.map(function(c,b){return null!==(t=null==a?void 0:a[b].reduceRight(function(a,b){var c=b.timestamp;return Math.min(a,new Date(c).getTime())},new Date().getTime()))&& void 0!==t?t:0}).reduce(function(a,b){return Math.min(a,b)}))},[v,a]),l=new Date,g=(0,m.useState)([i,l]),y=g[0],z=g[1],A=(0,m.useMemo)(function(){return f&&null!==(w=null==a?void 0:a.map(function(a){var b;return[{user:f,me:!0,histories:(0!==a.length?[{date:new Date,value:a[0].value},].concat(function(a){if(Array.isArray(a))return s(a)}(b=a.map(function(a){var b=a.timestamp,c=a.value;return{date:new Date(b),value:c}}))||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(b)||u(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):[]).sort(function(a,b){return a.date.getTime()-b.date.getTime()})},]}))&& void 0!==w?w:[]},[a]);return null===f||null===a?(0,j.jsx)(k.W2,{topBarPadding:!0,children:(0,j.jsx)(q.Z,{errorCode:c.errorCode})}):h.length?(0,j.jsx)(n.Z,{currentKey:"history",user:f,children:v.map(function(b,c){var a=b.topic,d=b.caption;return(0,j.jsxs)(m.Fragment,{children:[(0,j.jsxs)(k.Zb,{style:{padding:"16px"},children:[(0,j.jsx)(k.Jd,{variant:["h2","no-margin"],children:d}),(0,j.jsx)(k.T,{h:8}),(0,j.jsx)(o.vT,{children:o.cY.map(function(a){var b=a.caption,c=a.dt;return(0,j.jsx)(o.tw,{current:c===1/0?y===[i,l]:y[1].getTime()-y[0].getTime()===c,onClick:function(){return z([new Date(Math.max(l.getTime()-c,i.getTime())),l,])},children:b},b)})}),(0,j.jsx)(p.Z,{topic:a,data:A[c],range:y,onRangeChange:z,invert:"ratingRank"===a,size:Math.min(1200,x),drawTierLines:"rating"===a})]}),(0,j.jsx)(k.T,{h:32})]},a)})}):(0,j.jsx)(n.Z,{currentKey:"history",user:f,children:(0,j.jsx)(k.at,{children:"\uAE30\uB85D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})};c.getInitialProps=(h=(g=e().mark(function a(b){var c,d,f,g,h,i,j,k,m;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=(null!==(c=b.query.user_id)&& void 0!==c?c:"").toString(),a.prev=2,a.next=6,l().get("/user/show",{params:{handle:d},headers:(null===(f=b.req)|| void 0===f?void 0:null===(g=f.headers)|| void 0===g?void 0:g.cookie)?{cookie:null===(h=b.req)|| void 0===h?void 0:null===(i=h.headers)|| void 0===i?void 0:i.cookie}:void 0});case 6:return j=a.sent,a.next=9,Promise.all(v.map(function(g){var a,c,e,f,h=g.topic;return l().get("/user/history",{params:{handle:d,topic:h},headers:(null===(a=b.req)|| void 0===a?void 0:null===(c=a.headers)|| void 0===c?void 0:c.cookie)?{cookie:null===(e=b.req)|| void 0===e?void 0:null===(f=e.headers)|| void 0===f?void 0:f.cookie}:void 0})})).then(function(a){return a.map(function(a){return a.data})});case 9:return k=a.sent,a.abrupt("return",{siteTitle:[d],user:j.data,histories:k});case 13:return a.prev=13,a.t0=a.catch(2),a.abrupt("return",{siteTitle:[d],errorCode:l().isAxiosError(a.t0)?null===(m=a.t0.response)|| void 0===m?void 0:m.status:void 0,user:null,histories:null});case 18:case"end":return a.stop()}},a,null,[[2,13]])}),function(){var a=this,b=arguments;return new Promise(function(d,e){var f=g.apply(a,b);function c(a){t(f,d,e,c,h,"next",a)}function h(a){t(f,d,e,c,h,"throw",a)}c(void 0)})}),function(a){return h.apply(this,arguments)}),b.default=c}},function(a){a.O(0,[9954,3513,8095,9907,1860,9774,2888,179],function(){return a(a.s=40378)}),_N_E=a.O()}])